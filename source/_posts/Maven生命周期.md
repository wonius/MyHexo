---
title: Maven的那些事儿
copyright: true
date: 2018-10-22 16:06:33
tags: Maven
categories: Backend
keywords: Maven
description: Maven的那些事儿
---

## lifecycle、phase、goal

1. lifecycle由phase组成，phase由goal组成。phase可以看成小的生命周期，goal是最小的任务执行单元；
2. lifecycle总共有三个阶段，clean、default、site；每个阶段对应不同phase；
3. 一个phase中可以有多个goal；

## lifecycle

### clean

| phase      | function                                                     |
| ---------- | ------------------------------------------------------------ |
| pre-clean  | execute processes needed prior to the actual project cleaning |
| clean      | remove all files generated by the previous build             |
| Post-clean | execute processes needed to finalize the project cleaning    |

### default

| phase                        | function                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| validate                     | validate the project is correct and all necessary information is available. |
| initialize                   | initialize build state, e.g. set properties or create directories. |
| generate-sources             | generate any source code for inclusion in compilation.       |
| process-sources              | process the source code, for example to filter any values.   |
| generate-resources           | generate resources for inclusion in the package.             |
| process-resources            | copy and process the resources into the destination directory, ready for packaging. |
| compile                      | compile the source code of the project.                      |
| process-classes              | post-process the generated files from compilation, for example to do bytecode enhancement on Java classes. |
| generate-test-sources        | generate any test source code for inclusion in compilation.  |
| process-test-sources         | process the test source code, for example to filter any values. |
| generate-test-resources      | create resources for testing.                                |
| process-test-resources       | copy and process the resources into the test destination directory. |
| test-compile                 | compile the test source code into the test destination directory |
| process-test-classes         | post-process the generated files from test compilation, for example to do bytecode enhancement on Java classes. For Maven 2.0.5 and above. |
| test                         | run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed. |
| prepare-package              | perform any operations necessary to prepare a package before the actual packaging. This often results in an unpacked, processed version of the package. (Maven 2.1 and above) |
| package                      | take the compiled code and package it in its distributable format, such as a JAR. |
| pre-integration-test perform | actions required before integration tests are executed. This may involve things such as setting up the required environment. |
| integration-test             | process and deploy the package if necessary into an environment where integration tests can be run. |
| post-integration-test        | perform actions required after integration tests have been executed. This may including cleaning up the environment. |
| verify                       | run any checks to verify the package is valid and meets quality criteria. |
| install                      | install the package into the local repository, for use as a dependency in other projects locally. |
| deploy                       | done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects. |

### site

| phase       | function                                                     |
| ----------- | ------------------------------------------------------------ |
| pre-site    | execute processes needed prior to the actual project site generation |
| site        | generate the project's site documentation                    |
| post-site   | execute processes needed to finalize the site generation, and to prepare for site deployment |
| site-deploy | deploy the generated site documentation to the specified web server |

https://www.jianshu.com/p/fd43b3d0fdb0

## 插件执行顺序

1. 同一pom，按照插件配置的顺序执行；
2. 超级pom与自定义pom，同一phase，超级pom先执行；

